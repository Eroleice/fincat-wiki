---
title: 1-1. 这里开始
description: 第一次连接摸鱼Gaming
published: true
date: 2025-11-09T15:59:30.033Z
tags: 
editor: markdown
dateCreated: 2025-11-09T15:14:19.616Z
---

# 基本信息
- 开发环境：https://dev.moyu-gaming.com
- API文档：https://dev.moyu-gaming.com/api-docs

# 身份验证
## 获取 API KEY
开发者可以联系作者来获取一个 API KEY（16位字符串，包含数字和大小写字母），请妥善保管 API KEY 避免遗忘或泄露，摸鱼Gaming的绝大多数功能都需要在请求的 Header 中传入此参数。

## 请求 Token
开发者需要用自己持有的 API KEY 来向服务器请求一个 Token 用于其他请求，这个 Token 由 JWT 加密生成，有效期通常为 24 小时。

> **POST** /api/authorize
{.is-info}

``` json
// Header
{
  "accept": "application/json",
  "Content-Type": "application/json",
}
```

``` json
// Body
{
	"key": "your_api_key_here",
}
```
> 返回 201 说明成功生成了 Token，通过 `res.token` 取得 Token 字符串， `res.expireAt` 则是 Token 过期的时间戳。
{.is-success}

Token 本身不会在服务器储存，但是服务器会通过 JWT 解密来反向验证 Token 的有效性。你可以用同一个 API KEY 来请求若干个 Token，每个 Token 都不同且各自有效期独立，申请新的 Token 不会导致旧的 Token 失效。

> 考虑到 Token 泄密的可能以及带来的影响，未来可能会加入通过 API KEY 来作废当前所有 Token 的功能。
{.is-warning}

获得 Token 后，你需要在后续请求中的 Header 传入 `X-Authorization` 参数来验证身份，注意，**你需要在 Token 前面加上 `Bearer ` （包括后面的空格）来构成合法的验证令牌**。

# 获得第一个账户
## 账户注册
目前，账号注册需要提供用户名、密码和邮箱，他们分别要求符合：
- 用户名：8-24位字符串，仅包含字母、数字和下划线（不区分大小写）
- 密码：8-24位字符串，包含数字、小写字母、大写字母、特殊字符`!@#$%^&*`中的**至少三种**
- 邮箱：常规邮箱地址，不支持中文域名

其中，用户名和邮箱是唯一的，已注册过的用户名和邮箱无法再次注册（邮箱被修改后可以再次被注册）。

> **POST** /api/account/create
{.is-info}

``` json
// Header
{
	"X-Authorization": "Bearer your_token_here",
}
```

```json
// Body
{
  "username": "username_here",
  "password": "password_here",
  "email": "email@here.com",
}
```

> 返回 201 说明创建账户成功。
{.is-success}

## 登录账户（密码）
> **POST** /api/account/login/password
{.is-info}

``` json
// Header
{
	"X-Authorization": "Bearer your_token_here",
}
```

```json
// Body
{
  "username": "username_here",
  "password": "password_here",
}
```

> 返回 201 说明登录成功。你需要提取 `req.token` 作为后续请求中的 `X-Session` 参数。
{.is-success}

与 Token 类似，你同样需要在上方返回的字符串前面加上 `Bearer ` 来构成一个合法的令牌，这个令牌有效期 72 小时。同样的，重复发送登录请求会生成不同的 Session 令牌但是有效期相互独立。

至此，你已经获得了两个关键的令牌，**Token** 用来验证这个请求来自已知的开发者，**Session** 用来验证这个请求来自哪个用户，这两个参数都需要在 Header 中传入。

## 验证邮箱
没有验证邮箱的账户将在30天后被注销（ToDo，暂未生效的特性）。所有涉及游戏内容的操作都需要用户完成邮箱验证。因此，登录账户后的第一件时间就是验证邮箱。

摸鱼Gaming 的邮箱验证模式和其他应用没有什么区别，发送验证邮件 -> 点击链接 -> 完成验证。验证邮件每 5 分钟可以发送一次。

> **POST** /api/account/requestVerifyEmail
{.is-info}

``` json
// Header
{
	"X-Authorization": "Bearer your_token_here",
  "X-Session": "Bearer your_session_here",
}
```

```json
// Body 无需传入内容
```

> 返回 200 说明邮件发送成功。点击邮件内的链接即可完成验证。验证链接有效期 1 小时。
{.is-success}

## 登录账户（邮箱）
在验证邮箱后可以通过邮箱接收验证码来完成登录（因此无需设置找回密码功能，可以通过邮箱登录后直接修改密码）。邮箱登录方式详见 API 文档中的 `/api/account/requestLoginEmail` 和 `/api/account/login/email`
