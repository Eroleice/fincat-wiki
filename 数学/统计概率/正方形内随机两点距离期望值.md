---
title: 正方形内随机两点距离期望值
description: 
published: true
date: 2023-06-13T16:26:44.827Z
tags: 数学
editor: markdown
dateCreated: 2023-06-04T20:34:41.796Z
---

# 问题
单位正方形内两个随机点的距离期望是多少？

# 解题思路
## 简化问题
1. 单位长度线段内两个随机点的距离期望是多少？
2. 将单位长度线段平均分成n份，随机取其中两份，距离期望是多少？

第一个问题将原题干的维度降低，第二个问题将第一个问题的无限分布变为优先分布，当问题2满足`x->∞`时即可求出问题1的答案。

## 问题2解题
n等分的线段随机取2段（可重复），则有n^2^种取法，而最小距离为`0`，最大距离为`1-1/n`。

出现最小距离`0`意味着两次选到了同一个线段，那么在所有的取法中合计有`n`次，出现的概率是`1/n`;

第二小的距离是`1/n`，意味着选到了相邻的线段，那么在所有的取法中合计有`2n-2`次，出现的概率是`2n-2/n^2`。

| 距离 | 出现次数 | 出现概率 |
| :-----: | :-----: | :-----: |
| 0 | n | $\frac{n}{n^{2}}$ |
| 1/n | 2n-2 | $\frac{2n-2}{n^{2}}$ |
| 2/n | 2n-4 | $\frac{2n-4}{n^{2}}$ |
| 3/n | 2n-6 | $\frac{2n-6}{n^{2}}$ |
| ... | ... | ... |
| (n-2)/n | 4 | $\frac{4}{n^{2}}$ |
| (n-1)/n | 2 | $\frac{2}{n^{2}}$ |

验证：上表中的出现次数，除去第一行，显然是一个首项为`2`末项为`2(n-1)`的等差数列，求和后得：`n^2-n`,加上第一行的`n`也就是n^2^，覆盖了所有的组合。

那么，本题的期望值就变成了上表中距离和出现概率的乘积和，即：
$$E(d) = \sum_{i=1}^{n-1} \frac{n-i}{n} · \frac{2i}{ n^{2} }$$
$$E(d)=  \frac{1}{ n^{3} } ·  \sum_{i=1}^{n-1} (n-i) · 2i = \frac{1}{ n^{3} } ·  [2n\sum_{i=1}^{n-1} i - 2\sum_{i=1}^{n-1} i^{2}]$$
$$E(d) =  \frac{1}{ n^{3} } · [n^{2} · (n-1) - 2 ·  \frac{(n-1)·n·(2n-1)}{6} ]$$
$$E(d) = \frac{ n^{2}-1 }{3· n^{2} } =  \frac{1}{3} -  \frac{1}{3 n^{2}} $$
## 问题1解题
当`x->∞`时`E=1/3`,即**单位长度线段上任意两点的距离期望值为1/3**。

# 原题解题
假设正方形内分布了`n^2`个点，则两个相邻点的距离为`1/n`。